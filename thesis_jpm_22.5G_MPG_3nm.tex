\documentclass[11pt, a4paper]{report}

% =====================================================================
% PACKAGES
% =====================================================================
\usepackage[a4paper, margin=2.5cm]{geometry} % Adjust page margins
\usepackage{times} % Times New Roman font
\usepackage{setspace} % For line spacing
\usepackage{fancyhdr} % For custom headers/footers
\usepackage{titlesec} % For custom headings
\usepackage{graphicx} % For including images
\usepackage{caption} % For figure/table captions
\usepackage{float} % For precise placement of figures/tables
\usepackage{tocbibind} % Include bibliography in the Table of Contents
\usepackage{amsmath, amssymb} % For mathematical symbols
\usepackage{lipsum} % For placeholder text (remove in final document)
\usepackage{appendix} % For appendices
\usepackage{xcolor} % For custom colors
\usepackage{wallpaper} % For background images
\usepackage[numbers]{natbib} % For bibliography management
\usepackage{microtype} % Improves spacing and typography
\usepackage{ragged2e} % Better text alignment
\usepackage{bookmark} % Added to resolve the warning
\usepackage{siunitx} % For typesetting SI units
\usepackage{booktabs} % For professional quality tables
\usepackage{textcomp} % Provides extra symbols
\usepackage{gensymb} % Provides generic symbols for degrees, etc.
\usepackage{subcaption}   % modern subfigures
\usepackage{tabularx,threeparttable,makecell} % For advanced table formatting
\usepackage{enumitem} % For custom lists
\usepackage{hyperref} % For hyperlinks in the document
\usepackage{verbatim} % For verbatim text (e.g., code snippets)
\usepackage{listings} % For code listings
\usepackage{xcolor} % For code syntax highlighting
\usepackage{tikz} % For drawing diagrams
\usepackage{wallpaper} % For background images
\usepackage[xindy]{glossaries} % For creating glossaries and lists of acronyms


% Define two glossaries: one for acronyms, one for notation
\newglossary[alg]{acronym}{acr}{acn}{List of Abbreviations}
\newglossary[nlg]{notation}{not}{ntn}{List of Notation}
\makeglossaries

% Custom glossary styles to produce your tabular layouts
\newglossarystyle{tabularabbr}{%
  \setglossarystyle{long}% base style
  \renewenvironment{theglossary}%
    {\begin{tabular}{p{0.18\linewidth} p{0.75\linewidth}}%
     \textbf{Abbreviation} & \textbf{Definition} \\ \hline}%
    {\end{tabular}}%
  \renewcommand*{\glossentry}[2]{%
    \glsentryshort{##1} & \glsentrylong{##1} \\  
  }%
}

\newglossarystyle{tabularnotation}{%
  \setglossarystyle{long}%
  \renewenvironment{theglossary}%
    {\begin{tabular}{p{0.25\linewidth} p{0.75\linewidth}}%
     \textbf{Symbol} & \textbf{Meaning} \\ \hline}%
    {\end{tabular}}%
  \renewcommand*{\glossentry}[2]{%
    \glsentryname{##1} & \glossentrydesc{##1} \\%
  }%
}


% =====================================================================
% FORMATTING & SETUP
% =====================================================================
\setstretch{1.25} % Set line spacing to 1.25 as per regulations

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}
\captionsetup[figure]{font=small}
\setlength{\emergencystretch}{3em}
\bibliographystyle{unsrtnat}
\tolerance=1000
\emergencystretch=\maxdimen%
\hyphenpenalty=10000
\hbadness=10000

% Customizing headings (user preference, kept as is)
\titleformat{\chapter}[hang]
    {\normalfont\huge\bfseries\raggedleft}
    {\thechapter\hspace{1em}$|$\hspace{1em}}
    {0pt}
    {}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}
\titleformat{\section}[hang]
    {\normalfont\Large\bfseries}{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{0pt}{0pt}

% Header and Footer customization to meet regulations
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\fancyhead[L]{TITLE}
\fancyfoot[R]{\thepage} % Page numbers at the bottom right
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\headheight}{14.5pt}

% Import system for sections
\newcommand{\importsection}[1]{\input{sections/#1}}

% =====================================================================
% CUSTOM COMMANDS FOR FRONT/BACK MATTER
% =====================================================================

% Updated front page to include all required information
\newcommand{\frontpage}{
    \begin{titlepage}
        \centering
        \includegraphics[width=0.3\textwidth]{figures/university-logo.png}\\ % University logo
        \vspace{2cm}
        {\Huge\bfseries A 20GHz Programmable Clock Delay Stage\par}
        \vspace{1.5cm}
        %{\Large Subtitle if applicable\par}
        %\vfill
        {\Large\bfseries João Pedro Marcelino\par}
        \vfill
        A thesis submitted in fulfillment of the requirements\\
        for the degree of \emph{Master of Science}\\
        in Micro and Nanotechnology\\
        \vspace{2cm}
        {\bfseries Supervisor:}\\[0.5em]
        João Palma Goes (FCT), \
        Marc Erett (AMD)\\[2cm]
        {\bfseries Examining Committee:}\\[0.5em]
        President: Name of President\\
        Examiner: Name of Examiner\\
        Member: Name of Member\\[2cm]
        NOVA School of Science and Technology\\
        \vspace{1cm}
        {\large September 2025\par}
    \end{titlepage}
}

% ADDED: Command for the mandatory copyright page
\newcommand{\copyrightpage}{
    \thispagestyle{empty}
    \vspace*{0.1\textheight} % Adjust spacing as needed
    \importsection{copyright} % Create a "copyright.tex" file with the required text
    \cleardoublepage
}

% =====================================================================
% DOCUMENT START
% =====================================================================
\begin{document}

\frontpage%
\thispagestyle{empty}

% Copyright page immediately after title page
\copyrightpage

\pagenumbering{roman} % Roman numerals for preliminary pages

\chapter*{Abstract}
\importsection{abstract} % NOTE: Create an "abstract.tex" file for your English abstract
\cleardoublepage % Ensure next section starts on an odd page

% Replaced "Summary" with required Portuguese and English abstracts
\chapter*{Resumo}
\importsection{resumo} % NOTE: Create a "resumo.tex" file for your Portuguese abstract
\cleardoublepage % Ensure next section starts on an odd page

\chapter*{Acknowledgements}
\importsection{acknowledgements}

\input{glossary} % assumes glossary.tex is in same directory!

\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}
\tableofcontents
\cleardoublepage

\listoffigures
\cleardoublepage

\listoftables
\cleardoublepage
\addtocontents{toc}{\protect\setcounter{tocdepth}{5}}


% Start main content with Arabic numerals from page 1
\pagenumbering{arabic}
\setcounter{page}{1}

\chapter{Introduction}
\importsection{introduction}
\cleardoublepage

\chapter{State of the Art}
\importsection{stateoftheart}
\cleardoublepage

\chapter{Materials and Methods}
\importsection{methods}
\cleardoublepage

\chapter{Results and Discussion}
\importsection{results}
\cleardoublepage

\chapter{Conclusions and Future Perspectives}
\importsection{conclusions}
\cleardoublepage

{\fontsize{9pt}{11pt}\selectfont
\setlength{\bibsep}{0pt}
\bibliography{bibliography}
}
\cleardoublepage

\appendix
\chapter{Annexes}
\importsection{appendix_a}
\cleardoublepage
\importsection{appendix_b}
\cleardoublepage

\importsection{appendix_c}
\cleardoublepage

\importsection{appendix_d}
\cleardoublepage

\importsection{appendix_e}
\cleardoublepage

\importsection{appendix_f}
\cleardoublepage

\importsection{appendix_g}
\cleardoublepage

\importsection{appendix_h}
\cleardoublepage

\end{document}

